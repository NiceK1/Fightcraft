# AI Integration Setup Guide

Fightcraft now supports **real AI generation** for both sprites and stats!

## Quick Start (Without AI - Default Fallback)

The game works out of the box with procedural generation. No API keys required!

## Enable AI Generation (Optional)

To get **AI-generated sprites** and **creative item descriptions**, follow these steps:

### Step 1: Get API Keys

#### For Stats Generation (Anthropic Claude - Recommended)
1. Go to https://console.anthropic.com/
2. Sign up or log in
3. Navigate to "API Keys"
4. Create a new API key
5. Copy the key (starts with `sk-ant-...`)

**OR**

#### For Stats Generation (OpenAI GPT-4 - Alternative)
1. Go to https://platform.openai.com/
2. Sign up or log in
3. Navigate to "API Keys"
4. Create a new API key
5. Copy the key (starts with `sk-...`)

#### For Sprite Generation (Replicate - Recommended)
1. Go to https://replicate.com/account/api-tokens
2. Sign up or log in
3. Copy your API token

#### For Background Removal (Clipdrop - Optional)
1. Go to https://clipdrop.co/apis
2. Sign up or log in
3. Get your API key for background removal
4. This removes backgrounds from AI-generated sprites for cleaner visuals

### Step 2: Create .env File

1. Copy `.env.example` to `.env`:
   ```bash
   cp .env.example .env
   ```

2. Edit `.env` and add your API keys:
   ```bash
   # For stats generation (choose one)
   ANTHROPIC_API_KEY=sk-ant-your-key-here
   # OR
   OPENAI_API_KEY=sk-your-key-here

   # For sprite generation
   REPLICATE_API_TOKEN=your-replicate-token-here

   # Optional: For background removal on sprites
   CLIPDROP_API_KEY=your-clipdrop-key-here
   ```

### Step 3: Restart the Backend

```bash
python ai_backend/server.py
```

You should see:
```
[OK] Anthropic Claude API initialized for stats generation
[OK] Replicate API initialized for sprite generation
```

### Step 4: Play!

Now when you craft items:
- **Sprites** will be generated by SDXL AI (photorealistic fantasy items!)
- **Stats** will be created by Claude with creative names and descriptions
- Both are cached for instant reuse

## AI Providers Configuration

You can change AI providers in `ai_backend/server.py`:

```python
# For sprite generation
sprite_gen = SpriteGenerator(use_ai=True, ai_provider="replicate")  # or "comfyui"

# For stats generation
stats_gen = StatsGenerator(use_ai=True, ai_provider="anthropic")  # or "openai"
```

## Costs

**Replicate SDXL:**
- ~$0.01 per image
- Cached after first generation

**Anthropic Claude:**
- ~$0.003 per item (extremely cheap)
- Cached after first generation

**Total cost per unique item:** ~$0.013 (1.3 cents)

## Fallback System

If API keys are not found or AI generation fails:
- System automatically falls back to procedural generation
- Game continues working normally
- No crashes or errors

## Troubleshooting

**"ANTHROPIC_API_KEY not found"**
- Make sure `.env` file exists in the project root
- Check that the key is correctly formatted
- Restart the backend server

**"Replicate API token not found"**
- Same as above for `REPLICATE_API_TOKEN`

**Slow generation?**
- First generation takes 2-5 seconds (AI processing)
- Subsequent uses are instant (cached)
- The cache persists between sessions

**Want to disable AI?**
- Just remove the `.env` file or comment out the API keys
- System automatically uses fallback generation
